*実装内容**:
- 全ページ取得の確実な実装（maxPages=100）
- ページ数、データ量、配信パターンの詳細記録
- Meta Ads Managerとの照合結果の記録
- 数値差異の原因分析と記録

**成果物**:
- 実態調査レポート
- 最適maxPages値の特定
- API制限 vs 実態の判定

### Phase 2: 最適化（10秒制約）

**目的**: Phase 1の結果に基づいた最適化実装

**実装内容**:
- Phase 1結果に基づくmaxPages最適値設定
- 必要最小限のAPIコール最適化
- キャッシュ戦略の確立
- 10秒制約の達成

**成果物**:
- 高速化されたデータ取得システム
- キャッシュシステム
- パフォーマンスメトリクス

### Phase 3: 透明性向上

**目的**: データの実態をユーザーが理解できる形で表示

**実装内容**:
- 配信実態の可視化（タイムラインビュー）
- 日割り/合計の併記表示
- データ信頼度の表示
- 配信パターンラベル表示

**成果物**:
- 透明性の高いUIコンポーネント
- ユーザーガイドライン
- 数値差異警告システム

## 検証手順

1. **基本動作確認**
   - 開発環境で30日間のデータ全取得を実行
   - コンソールログでページネーション動作を確認
   - 各広告の実配信日数と停止日数を確認
   - 配信率と日割り平均値の正確性を確認
   - Meta Ads Managerとの数値差異原因を特定

2. **実態検証**
   - 各広告の配信状況が正確に表示されるか確認
   - 主要KPIの日割り平均値が正しく算出されるか確認
   - Meta Ads Managerとの数値差異が透明に表示されるか確認
   - 配信パターンラベルが適切に表示されるか確認

3. **パフォーマンス検証**
   - 処理時間測定（目標: 10秒以内）
   - メモリ使用量監視
   - ネットワーク通信量確認

4. **異常系テスト**
   - APIトークン無効化時の動作
   - ネットワーク切断時の動作
   - 広告が1日しか配信されていないケースの表示
   - 配信期間が指定期間を超えるケースの表示
   - 未配信広告の適切なラベル表示
   - 断続配信広告の適切な表示

5. **実態調査テスト**
   - ページネーションによる全データ取得の確認
   - APIから返却される実データ件数の記録
   - 期間集約モードと日別モードの数値比較
   - データ欠損の真の原因（API制限 vs 実態）の特定

## 付録

### 参考資料

- [Meta Graph API Documentation](https://developers.facebook.com/docs/graph-api/)
- [Marketing API v23.0 Changelog](https://developers.facebook.com/docs/graph-api/changelog/version23.0/)
- [Pagination Guide](https://developers.facebook.com/docs/graph-api/using-graph-api#paging)

### 用語定義

- **ページネーション**: 大量のデータを複数のページに分割して取得する仕組み
- **maxPages**: 取得する最大ページ数を制限するパラメータ
- **paging.next**: 次のページのデータを取得するためのURL
- **time_increment**: データを日別に分割して取得するためのパラメータ

### 変更履歴

- 2025-08-28: 初版作成