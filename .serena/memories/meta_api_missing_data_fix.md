# Meta API 8月1-2日データ欠損問題の解決策

## 問題の根本原因
1. **フィルタリング条件の問題**: `ad.effective_status`や`ad.configured_status`でフィルタリングすると、削除/アーカイブされた広告が取得できない
2. **アトリビューション設定の欠如**: Meta APIのデフォルトアトリビューション設定が不明確
3. **タイムゾーン処理の不備**: Asia/Tokyoを指定しているが、time_rangeパラメータの形式に問題がある可能性

## 主要な修正ポイント

### 1. ThreeLayerCache.ts の修正
- time_rangeパラメータの正しい形式での指定
- アトリビューション設定の追加
- フィルタリング条件の完全削除または修正

### 2. api-client.ts の修正  
- use_unified_attribution_setting: true の追加
- action_attribution_windowsの明示的指定
- 削除された広告を含む全データ取得

### 3. デバッグ機能の強化
- 取得できなかった日付の特定
- APIレスポンスの詳細ログ出力
- ページネーション情報の完全追跡

## 実装手順
1. フィルタリング条件を完全に削除して全広告を取得
2. time_rangeをJSON形式で正しく指定
3. アトリビューション設定を追加
4. デバッグ情報を強化して問題を特定
5. 取得できたデータの日付範囲を確認